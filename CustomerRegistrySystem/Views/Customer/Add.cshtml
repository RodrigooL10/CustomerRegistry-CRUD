@model CustomerRegistrySystem.Models.AddCustomerViewModel

<h1>Add Customer</h1>

<form method="post" action="Add">
    <div class="mb-3">
        <label class="form-label">Nome</label>
        <input type="text" class="form-control" asp-for="Name" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Email</label>
        <input type="email" class="form-control" asp-for="Email" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Telefone</label>
        <input type="text" class="form-control" asp-for="Phone" required>
    </div>

    <h3>Endereços</h3>
    <div id="addressContainer">
        <div class="address-group mb-3">
            <h4>Endereço 1</h4>
            <label class="form-label">Rua</label>
            <input type="text" class="form-control" asp-for="Addresses[0].Street" required>
            <label class="form-label">Cidade</label>
            <input type="text" class="form-control" asp-for="Addresses[0].City" required>
            <label class="form-label">Estado</label>
            <input type="text" class="form-control" asp-for="Addresses[0].State" required>
            <label class="form-label">CEP</label>
            <input type="text" class="form-control" asp-for="Addresses[0].CEP" required>
            <label class="form-label">Complemento</label>
            <input type="text" class="form-control" asp-for="Addresses[0].Complement">
            <label class="form-label">Tipo</label>
            <select class="form-select" asp-for="Addresses[0].Type">
                <option value="Fiscal">Fiscal</option>
                <option value="Cobrança">Cobrança</option>
                <option value="Entrega">Entrega</option>
            </select>
        </div>
    </div>

    <button type="button" class="btn btn-secondary" id="addAddressButton">Adicionar Outro Endereço</button>
    <button type="submit" class="btn btn-primary">Enviar</button>
</form>

@section Scripts {
    <script>
        let addressCount = 1;

        document.getElementById("addAddressButton").addEventListener("click", function () {
            addressCount++;
            const addressContainer = document.getElementById("addressContainer");
            const newAddressGroup = document.createElement("div");
            newAddressGroup.classList.add("address-group", "mb-3");
            newAddressGroup.innerHTML = `
                        <h4>Endereço ${addressCount}</h4>
                        <label class="form-label">Rua</label>
                        <input type="text" class="form-control" name="Addresses[${addressCount - 1}].Street" required>
                        <label class="form-label">Cidade</label>
                        <input type="text" class="form-control" name="Addresses[${addressCount - 1}].City" required>
                        <label class="form-label">Estado</label>
                        <input type="text" class="form-control" name="Addresses[${addressCount - 1}].State" required>
                        <label class="form-label">CEP</label>
                        <input type="text" class="form-control" name="Addresses[${addressCount - 1}].CEP" required>
                        <label class="form-label">Complemento</label>
                        <input type="text" class="form-control" name="Addresses[${addressCount - 1}].Complement">
                        <label class="form-label">Tipo</label>
                        <select class="form-select" name="Addresses[${addressCount - 1}].Type">
                            <option value="Fiscal">Fiscal</option>
                            <option value="Cobrança">Cobrança</option>
                            <option value="Entrega">Entrega</option>
                        </select>
                    `;
            addressContainer.appendChild(newAddressGroup);
        });
    </script>
}
